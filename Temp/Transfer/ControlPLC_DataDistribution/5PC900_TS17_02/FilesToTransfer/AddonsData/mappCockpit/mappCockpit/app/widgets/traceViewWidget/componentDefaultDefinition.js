var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
define(["require", "exports", "../splitterWidget/splitterDefinition", "../../common/componentBase/componentSettings", "../common/splitterComponentSettings", "../common/componentDefaultDefinitionWidgetBase", "../../common/componentBase/componentDefaultSettingsPackage", "../../framework/componentHub/bindings/bindingDeclarations"], function (require, exports, splitterDefinition_1, componentSettings_1, splitterComponentSettings_1, componentDefaultDefinitionWidgetBase_1, componentDefaultSettingsPackage_1, Binding) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var ComponentDefaultDefinition = /** @class */ (function (_super) {
        __extends(ComponentDefaultDefinition, _super);
        function ComponentDefaultDefinition() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.defaultComponentSettingsId = "traceViewDefinition";
            _this.MainSplitterDefinitionId = "traceViewMainSplitterDefinition";
            _this.InnerSplitterDefinitionId = "traceViewInnerSplitterDefinition";
            _this.RightSplitterDefinitionId = "traceViewRightSplitterDefinition";
            return _this;
        }
        /**
         * Returns the default component settings for this widget
         *
         * @returns {ComponentSettings}
         * @memberof ComponentDefaultDefinition
         */
        ComponentDefaultDefinition.prototype.getDefaultComponentSettings = function () {
            var componentSettings = new componentSettings_1.ComponentSettings();
            // add sub compontents
            componentSettings.addSubComponent("SeriesProvider", ComponentDefaultDefinition.SeriesProviderId);
            componentSettings.addSubComponent("SplitterWidget", ComponentDefaultDefinition.SplitterWidgetTraceViewId, this.MainSplitterDefinitionId);
            // Add bindings
            componentSettings.addBindingByDecl(Binding.Traces.TraceData.Load, "", "invokeLoadTraceData");
            componentSettings.addBindingByDecl(Binding.Traces.TraceData.Loaded, "onTraceDataLoaded", "");
            componentSettings.addBindingByDecl(Binding.Traces.TraceData.LoadingError, "onErrorLoadingTraceData", "");
            componentSettings.addBindingByDecl(Binding.Traces.State, "onTraceStateChanged", "");
            componentSettings.addBindingByDecl(Binding.Traces.AvailableDataPoints, "updateAvailableDataPoints", "");
            return componentSettings;
        };
        ComponentDefaultDefinition.prototype.getMainSplitterDefinition = function () {
            var splitterComponentSettings = new splitterComponentSettings_1.SplitterComponentSettings(splitterDefinition_1.SplitterDefinition.orientationVertical);
            splitterComponentSettings.addPane("TraceControlWidget", ComponentDefaultDefinition.TraceControlWidgetId, "", splitterComponentSettings_1.SplitterComponentSettings.getPaneSettings(40, false));
            splitterComponentSettings.addPane("SplitterWidget", ComponentDefaultDefinition.SplitterWidgetMainTraceId, this.InnerSplitterDefinitionId, splitterComponentSettings_1.SplitterComponentSettings.getPaneSettings(-1, false));
            return splitterComponentSettings;
        };
        ComponentDefaultDefinition.prototype.getInnerSplitterDefinition = function () {
            var splitterComponentSettings = new splitterComponentSettings_1.SplitterComponentSettings(splitterDefinition_1.SplitterDefinition.orientationHorizontal);
            splitterComponentSettings.addPane("SignalManagerWidget", ComponentDefaultDefinition.SignalManagerWidgetId, "", splitterComponentSettings_1.SplitterComponentSettings.getPaneSettings(350));
            splitterComponentSettings.addPane("ChartViewWidget", ComponentDefaultDefinition.ChartViewWidgetId, "", splitterComponentSettings_1.SplitterComponentSettings.getPaneSettings(-1, true, 150));
            splitterComponentSettings.addPane("SplitterWidget", ComponentDefaultDefinition.SplitterWidgetRightTraceId, this.RightSplitterDefinitionId, splitterComponentSettings_1.SplitterComponentSettings.getPaneSettings(300));
            return splitterComponentSettings;
        };
        ComponentDefaultDefinition.prototype.getRightSplitterDefinition = function () {
            var splitterComponentSettings = new splitterComponentSettings_1.SplitterComponentSettings(splitterDefinition_1.SplitterDefinition.orientationVertical);
            splitterComponentSettings.addPane("ChartManagerWidget", ComponentDefaultDefinition.ChartManagerWidgetId, "", splitterComponentSettings_1.SplitterComponentSettings.getPaneSettings(-1));
            splitterComponentSettings.addPane("CursorInfoWidget", ComponentDefaultDefinition.CursorInfoWidgetId, "", splitterComponentSettings_1.SplitterComponentSettings.getPaneSettings(300));
            return splitterComponentSettings;
        };
        /**
         * Adds some default persisting data packages in the main default persisting data provider
         *
         * @returns {(ComponentDefaultSettingsPackage[]| undefined)}
         * @memberof ComponentDefaultDefinition
         */
        ComponentDefaultDefinition.prototype.getAdditionalDefaultComponentSettings = function () {
            var defaultSettingsPackages = new Array();
            defaultSettingsPackages.push(new componentDefaultSettingsPackage_1.ComponentDefaultSettingsPackage(this.MainSplitterDefinitionId, this.getMainSplitterDefinition()));
            defaultSettingsPackages.push(new componentDefaultSettingsPackage_1.ComponentDefaultSettingsPackage(this.InnerSplitterDefinitionId, this.getInnerSplitterDefinition()));
            defaultSettingsPackages.push(new componentDefaultSettingsPackage_1.ComponentDefaultSettingsPackage(this.RightSplitterDefinitionId, this.getRightSplitterDefinition()));
            return defaultSettingsPackages;
        };
        ComponentDefaultDefinition.SeriesProviderId = "SeriesProvider";
        ComponentDefaultDefinition.SplitterWidgetTraceViewId = "SplitterWidget_TraceView";
        ComponentDefaultDefinition.SplitterWidgetMainTraceId = "SplitterWidget_MainTrace";
        ComponentDefaultDefinition.SplitterWidgetRightTraceId = "SplitterWidget_RightTrace";
        ComponentDefaultDefinition.TraceControlWidgetId = "TraceControlWidget";
        ComponentDefaultDefinition.SignalManagerWidgetId = "SignalManagerWidget";
        ComponentDefaultDefinition.ChartViewWidgetId = "ChartViewWidget";
        ComponentDefaultDefinition.ChartManagerWidgetId = "ChartManagerWidget";
        ComponentDefaultDefinition.CursorInfoWidgetId = "CursorInfoWidget";
        return ComponentDefaultDefinition;
    }(componentDefaultDefinitionWidgetBase_1.ComponentDefaultDefinitionWidgetBase));
    exports.ComponentDefaultDefinition = ComponentDefaultDefinition;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50RGVmYXVsdERlZmluaXRpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvYXBwL3dpZGdldHMvdHJhY2VWaWV3V2lkZ2V0L2NvbXBvbmVudERlZmF1bHREZWZpbml0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7SUFPQTtRQUFnRCw4Q0FBb0M7UUFBcEY7WUFBQSxxRUEyRUM7WUE5RG1CLGdDQUEwQixHQUFHLHFCQUFxQixDQUFDO1lBRWxELDhCQUF3QixHQUFHLGlDQUFpQyxDQUFDO1lBQzdELCtCQUF5QixHQUFHLGtDQUFrQyxDQUFDO1lBQy9ELCtCQUF5QixHQUFHLGtDQUFrQyxDQUFDOztRQTBEcEYsQ0FBQztRQXhERzs7Ozs7V0FLRztRQUNJLGdFQUEyQixHQUFsQztZQUNJLElBQUksaUJBQWlCLEdBQUcsSUFBSSxxQ0FBaUIsRUFBRSxDQUFDO1lBQ2hELHNCQUFzQjtZQUN0QixpQkFBaUIsQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLEVBQUUsMEJBQTBCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUNqRyxpQkFBaUIsQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLEVBQUUsMEJBQTBCLENBQUMseUJBQXlCLEVBQUUsSUFBSSxDQUFDLHdCQUF3QixDQUFDLENBQUM7WUFFekksZUFBZTtZQUNmLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUscUJBQXFCLENBQUMsQ0FBQztZQUM3RixpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsbUJBQW1CLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDN0YsaUJBQWlCLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsWUFBWSxFQUFFLHlCQUF5QixF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K0IsQ0FBQyxJQUFJLENBQUMseUJBQXlCLEVBQUUsSUFBSSxDQUFDLDBCQUEwQixFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3JJLE9BQU8sdUJBQXVCLENBQUM7UUFDbkMsQ0FBQztRQXhFYSwyQ0FBZ0IsR0FBRyxnQkFBZ0IsQ0FBQztRQUVwQyxvREFBeUIsR0FBRywwQkFBMEIsQ0FBQztRQUN2RCxvREFBeUIsR0FBRywwQkFBMEIsQ0FBQztRQUN2RCxxREFBMEIsR0FBRywyQkFBMkIsQ0FBQztRQUN6RCwrQ0FBb0IsR0FBRyxvQkFBb0IsQ0FBQztRQUM1QyxnREFBcUIsR0FBRyxxQkFBcUIsQ0FBQztRQUM5Qyw0Q0FBaUIsR0FBRyxpQkFBaUIsQ0FBQztRQUN0QywrQ0FBb0IsR0FBRyxvQkFBb0IsQ0FBQztRQUM1Qyw2Q0FBa0IsR0FBRyxrQkFBa0IsQ0FBQztRQWdFMUQsaUNBQUM7S0FBQSxBQTNFRCxDQUFnRCwyRUFBb0MsR0EyRW5GO0lBM0VZLGdFQUEwQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNwbGl0dGVyRGVmaW5pdGlvbiB9IGZyb20gXCIuLi9zcGxpdHRlcldpZGdldC9zcGxpdHRlckRlZmluaXRpb25cIjtcclxuaW1wb3J0IHsgQ29tcG9uZW50U2V0dGluZ3MgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2NvbXBvbmVudEJhc2UvY29tcG9uZW50U2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgU3BsaXR0ZXJDb21wb25lbnRTZXR0aW5ncyB9IGZyb20gXCIuLi9jb21tb24vc3BsaXR0ZXJDb21wb25lbnRTZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBDb21wb25lbnREZWZhdWx0RGVmaW5pdGlvbldpZGdldEJhc2UgfSBmcm9tIFwiLi4vY29tbW9uL2NvbXBvbmVudERlZmF1bHREZWZpbml0aW9uV2lkZ2V0QmFzZVwiO1xyXG5pbXBvcnQgeyBDb21wb25lbnREZWZhdWx0U2V0dGluZ3NQYWNrYWdlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9jb21wb25lbnRCYXNlL2NvbXBvbmVudERlZmF1bHRTZXR0aW5nc1BhY2thZ2VcIjtcclxuaW1wb3J0ICogYXMgQmluZGluZyBmcm9tIFwiLi4vLi4vZnJhbWV3b3JrL2NvbXBvbmVudEh1Yi9iaW5kaW5ncy9iaW5kaW5nRGVjbGFyYXRpb25zXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50RGVmYXVsdERlZmluaXRpb24gZXh0ZW5kcyBDb21wb25lbnREZWZhdWx0RGVmaW5pdGlvbldpZGdldEJhc2V7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBTZXJpZXNQcm92aWRlcklkID0gXCJTZXJpZXNQcm92aWRlclwiO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgU3BsaXR0ZXJXaWRnZXRUcmFjZVZpZXdJZCA9IFwiU3BsaXR0ZXJXaWRnZXRfVHJhY2VWaWV3XCI7XHJcbiAgICBwdWJsaWMgc3RhdGljIFNwbGl0dGVyV2lkZ2V0TWFpblRyYWNlSWQgPSBcIlNwbGl0dGVyV2lkZ2V0X01haW5UcmFjZVwiO1xyXG4gICAgcHVibGljIHN0YXRpYyBTcGxpdHRlcldpZGdldFJpZ2h0VHJhY2VJZCA9IFwiU3BsaXR0ZXJXaWRnZXRfUmlnaHRUcmFjZVwiO1xyXG4gICAgcHVibGljIHN0YXRpYyBUcmFjZUNvbnRyb2xXaWRnZXRJZCA9IFwiVHJhY2VDb250cm9sV2lkZ2V0XCI7XHJcbiAgICBwdWJsaWMgc3RhdGljIFNpZ25hbE1hbmFnZXJXaWRnZXRJZCA9IFwiU2lnbmFsTWFuYWdlcldpZGdldFwiO1xyXG4gICAgcHVibGljIHN0YXRpYyBDaGFydFZpZXdXaWRnZXRJZCA9IFwiQ2hhcnRWaWV3V2lkZ2V0XCI7XHJcbiAgICBwdWJsaWMgc3RhdGljIENoYXJ0TWFuYWdlcldpZGdldElkID0gXCJDaGFydE1hbmFnZXJXaWRnZXRcIjtcclxuICAgIHB1YmxpYyBzdGF0aWMgQ3Vyc29ySW5mb1dpZGdldElkID0gXCJDdXJzb3JJbmZvV2lkZ2V0XCI7XHJcblxyXG4gICAgcHVibGljIHJlYWRvbmx5IGRlZmF1bHRDb21wb25lbnRTZXR0aW5nc0lkID0gXCJ0cmFjZVZpZXdEZWZpbml0aW9uXCI7XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBNYWluU3BsaXR0ZXJEZWZpbml0aW9uSWQgPSBcInRyYWNlVmlld01haW5TcGxpdHRlckRlZmluaXRpb25cIjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgSW5uZXJTcGxpdHRlckRlZmluaXRpb25JZCA9IFwidHJhY2VWaWV3SW5uZXJTcGxpdHRlckRlZmluaXRpb25cIjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgUmlnaHRTcGxpdHRlckRlZmluaXRpb25JZCA9IFwidHJhY2VWaWV3UmlnaHRTcGxpdHRlckRlZmluaXRpb25cIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGRlZmF1bHQgY29tcG9uZW50IHNldHRpbmdzIGZvciB0aGlzIHdpZGdldFxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtDb21wb25lbnRTZXR0aW5nc31cclxuICAgICAqIEBtZW1iZXJvZiBDb21wb25lbnREZWZhdWx0RGVmaW5pdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RGVmYXVsdENvbXBvbmVudFNldHRpbmdzKCkgOiBDb21wb25lbnRTZXR0aW5ncyB7XHJcbiAgICAgICAgbGV0IGNvbXBvbmVudFNldHRpbmdzID0gbmV3IENvbXBvbmVudFNldHRpbmdzKCk7XHJcbiAgICAgICAgLy8gYWRkIHN1YiBjb21wb250ZW50c1xyXG4gICAgICAgIGNvbXBvbmVudFNldHRpbmdzLmFkZFN1YkNvbXBvbmVudChcIlNlcmllc1Byb3ZpZGVyXCIsIENvbXBvbmVudERlZmF1bHREZWZpbml0aW9uLlNlcmllc1Byb3ZpZGVySWQpOyAgICAgICAgXHJcbiAgICAgICAgY29tcG9uZW50U2V0dGluZ3MuYWRkU3ViQ29tcG9uZW50KFwiU3BsaXR0ZXJXaWRnZXRcIiwgQ29tcG9uZW50RGVmYXVsdERlZmluaXRpb24uU3BsaXR0ZXJXaWRnZXRUcmFjZVZpZXdJZCwgdGhpcy5NYWluU3BsaXR0ZXJEZWZpbml0aW9uSWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEFkZCBiaW5kaW5nc1xyXG4gICAgICAgIGNvbXBvbmVudFNldHRpbmdzLmFkZEJpbmRpbmdCeURlY2woQmluZGluZy5UcmFjZXMuVHJhY2VEYXRhLkxvYWQsIFwiXCIsIFwiaW52b2tlTG9hZFRyYWNlRGF0YVwiKTtcclxuICAgICAgICBjb21wb25lbnRTZXR0aW5ncy5hZGRCaW5kaW5nQnlEZWNsKEJpbmRpbmcuVHJhY2VzLlRyYWNlRGF0YS5Mb2FkZWQsIFwib25UcmFjZURhdGFMb2FkZWRcIiwgXCJcIik7XHJcbiAgICAgICAgY29tcG9uZW50U2V0dGluZ3MuYWRkQmluZGluZ0J5RGVjbChCaW5kaW5nLlRyYWNlcy5UcmFjZURhdGEuTG9hZGluZ0Vycm9yLCBcIm9uRXJyb3JMb2FkaW5nVHJhY2VEYXRhXCIsIFwiXCIpO1xyXG4gICAgICAgIGNvbXBvbmVudFNldHRpbmdzLmFkZEJpbmRpbmdCeURlY2woQmluZGluZy5UcmFjZXMuU3RhdGUsIFwib25UcmFjZVN0YXRlQ2hhbmdlZFwiLCBcIlwiKTtcclxuICAgICAgICBjb21wb25lbnRTZXR0aW5ncy5hZGRCaW5kaW5nQnlEZWNsKEJpbmRpbmcuVHJhY2VzLkF2YWlsYWJsZURhdGFQb2ludHMsIFwidXBkYXRlQXZhaWxhYmxlRGF0YVBvaW50c1wiLCBcIlwiKTtcclxuICAgICAgICByZXR1cm4gY29tcG9uZW50U2V0dGluZ3M7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRNYWluU3BsaXR0ZXJEZWZpbml0aW9uKCkgOiBDb21wb25lbnRTZXR0aW5ncyB7XHJcbiAgICAgICAgbGV0IHNwbGl0dGVyQ29tcG9uZW50U2V0dGluZ3MgPSBuZXcgU3BsaXR0ZXJDb21wb25lbnRTZXR0aW5ncyhTcGxpdHRlckRlZmluaXRpb24ub3JpZW50YXRpb25WZXJ0aWNhbCk7XHJcbiAgICAgICAgc3BsaXR0ZXJDb21wb25lbnRTZXR0aW5ncy5hZGRQYW5lKFwiVHJhY2VDb250cm9sV2lkZ2V0XCIsIENvbXBvbmVudERlZmF1bHREZWZpbml0aW9uLlRyYWNlQ29udHJvbFdpZGdldElkLCBcIlwiLCBTcGxpdHRlckNvbXBvbmVudFNldHRpbmdzLmdldFBhbmVTZXR0aW5ncyg0MCwgZmFsc2UpKTtcclxuICAgICAgICBzcGxpdHRlckNvbXBvbmVudFNldHRpbmdzLmFkZFBhbmUoXCJTcGxpdHRlcldpZGdldFwiLCBDb21wb25lbnREZWZhdWx0RGVmaW5pdGlvbi5TcGxpdHRlcldpZGdldE1haW5UcmFjZUlkLCB0aGlzLklubmVyU3BsaXR0ZXJEZWZpbml0aW9uSWQsIFNwbGl0dGVyQ29tcG9uZW50U2V0dGluZ3MuZ2V0UGFuZVNldHRpbmdzKC0xLCBmYWxzZSkpO1xyXG4gICAgICAgIHJldHVybiBzcGxpdHRlckNvbXBvbmVudFNldHRpbmdzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0SW5uZXJTcGxpdHRlckRlZmluaXRpb24oKSA6IENvbXBvbmVudFNldHRpbmdzIHtcclxuICAgICAgICBsZXQgc3BsaXR0ZXJDb21wb25lbnRTZXR0aW5ncyA9IG5ldyBTcGxpdHRlckNvbXBvbmVudFNldHRpbmdzKFNwbGl0dGVyRGVmaW5pdGlvbi5vcmllbnRhdGlvbkhvcml6b250YWwpO1xyXG4gICAgICAgIHNwbGl0dGVyQ29tcG9uZW50U2V0dGluZ3MuYWRkUGFuZShcIlNpZ25hbE1hbmFnZXJXaWRnZXRcIiwgQ29tcG9uZW50RGVmYXVsdERlZmluaXRpb24uU2lnbmFsTWFuYWdlcldpZGdldElkLCBcIlwiLCBTcGxpdHRlckNvbXBvbmVudFNldHRpbmdzLmdldFBhbmVTZXR0aW5ncygzNTApKTtcclxuICAgICAgICBzcGxpdHRlckNvbXBvbmVudFNldHRpbmdzLmFkZFBhbmUoXCJDaGFydFZpZXdXaWRnZXRcIiwgQ29tcG9uZW50RGVmYXVsdERlZmluaXRpb24uQ2hhcnRWaWV3V2lkZ2V0SWQsIFwiXCIsIFNwbGl0dGVyQ29tcG9uZW50U2V0dGluZ3MuZ2V0UGFuZVNldHRpbmdzKC0xLCB0cnVlLCAxNTApKTtcclxuICAgICAgICBzcGxpdHRlckNvbXBvbmVudFNldHRpbmdzLmFkZFBhbmUoXCJTcGxpdHRlcldpZGdldFwiLCBDb21wb25lbnREZWZhdWx0RGVmaW5pdGlvbi5TcGxpdHRlcldpZGdldFJpZ2h0VHJhY2VJZCwgdGhpcy5SaWdodFNwbGl0dGVyRGVmaW5pdGlvbklkLCBTcGxpdHRlckNvbXBvbmVudFNldHRpbmdzLmdldFBhbmVTZXR0aW5ncygzMDApKTtcclxuICAgICAgICByZXR1cm4gc3BsaXR0ZXJDb21wb25lbnRTZXR0aW5ncztcclxuICAgIH0gXHJcblxyXG4gICAgcHJpdmF0ZSBnZXRSaWdodFNwbGl0dGVyRGVmaW5pdGlvbigpIDogQ29tcG9uZW50U2V0dGluZ3Mge1xyXG4gICAgICAgIGxldCBzcGxpdHRlckNvbXBvbmVudFNldHRpbmdzID0gbmV3IFNwbGl0dGVyQ29tcG9uZW50U2V0dGluZ3MoU3BsaXR0ZXJEZWZpbml0aW9uLm9yaWVudGF0aW9uVmVydGljYWwpO1xyXG4gICAgICAgIHNwbGl0dGVyQ29tcG9uZW50U2V0dGluZ3MuYWRkUGFuZShcIkNoYXJ0TWFuYWdlcldpZGdldFwiLCBDb21wb25lbnREZWZhdWx0RGVmaW5pdGlvbi5DaGFydE1hbmFnZXJXaWRnZXRJZCwgXCJcIiwgU3BsaXR0ZXJDb21wb25lbnRTZXR0aW5ncy5nZXRQYW5lU2V0dGluZ3MoLTEpKTtcclxuICAgICAgICBzcGxpdHRlckNvbXBvbmVudFNldHRpbmdzLmFkZFBhbmUoXCJDdXJzb3JJbmZvV2lkZ2V0XCIsIENvbXBvbmVudERlZmF1bHREZWZpbml0aW9uLkN1cnNvckluZm9XaWRnZXRJZCwgXCJcIiwgU3BsaXR0ZXJDb21wb25lbnRTZXR0aW5ncy5nZXRQYW5lU2V0dGluZ3MoMzAwKSk7XHJcbiAgICAgICAgcmV0dXJuIHNwbGl0dGVyQ29tcG9uZW50U2V0dGluZ3M7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIHNvbWUgZGVmYXVsdCBwZXJzaXN0aW5nIGRhdGEgcGFja2FnZXMgaW4gdGhlIG1haW4gZGVmYXVsdCBwZXJzaXN0aW5nIGRhdGEgcHJvdmlkZXJcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7KENvbXBvbmVudERlZmF1bHRTZXR0aW5nc1BhY2thZ2VbXXwgdW5kZWZpbmVkKX1cclxuICAgICAqIEBtZW1iZXJvZiBDb21wb25lbnREZWZhdWx0RGVmaW5pdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0QWRkaXRpb25hbERlZmF1bHRDb21wb25lbnRTZXR0aW5ncygpOiBDb21wb25lbnREZWZhdWx0U2V0dGluZ3NQYWNrYWdlW118IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgbGV0IGRlZmF1bHRTZXR0aW5nc1BhY2thZ2VzID0gbmV3IEFycmF5PENvbXBvbmVudERlZmF1bHRTZXR0aW5nc1BhY2thZ2U+KCk7XHJcbiAgICAgICAgZGVmYXVsdFNldHRpbmdzUGFja2FnZXMucHVzaChuZXcgQ29tcG9uZW50RGVmYXVsdFNldHRpbmdzUGFja2FnZSh0aGlzLk1haW5TcGxpdHRlckRlZmluaXRpb25JZCwgdGhpcy5nZXRNYWluU3BsaXR0ZXJEZWZpbml0aW9uKCkpKTtcclxuICAgICAgICBkZWZhdWx0U2V0dGluZ3NQYWNrYWdlcy5wdXNoKG5ldyBDb21wb25lbnREZWZhdWx0U2V0dGluZ3NQYWNrYWdlKHRoaXMuSW5uZXJTcGxpdHRlckRlZmluaXRpb25JZCwgdGhpcy5nZXRJbm5lclNwbGl0dGVyRGVmaW5pdGlvbigpKSk7XHJcbiAgICAgICAgZGVmYXVsdFNldHRpbmdzUGFja2FnZXMucHVzaChuZXcgQ29tcG9uZW50RGVmYXVsdFNldHRpbmdzUGFja2FnZSh0aGlzLlJpZ2h0U3BsaXR0ZXJEZWZpbml0aW9uSWQsIHRoaXMuZ2V0UmlnaHRTcGxpdHRlckRlZmluaXRpb24oKSkpO1xyXG4gICAgICAgIHJldHVybiBkZWZhdWx0U2V0dGluZ3NQYWNrYWdlcztcclxuICAgIH1cclxufSJdfQ==